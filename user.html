<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>User Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
firebase.initializeApp({
  databaseURL: "https://alisignal-default-rtdb.firebaseio.com/"
});
</script>

<style>
body{
  background:#000;
  color:white;
  font-family:Arial;
  text-align:center;
}
.section{
  border:1px solid #333;
  padding:15px;
  margin:15px;
}
</style>
</head>

<body>

<h1>ðŸ“Š USER PANEL</h1>

<div class="section">
  <h3>ðŸ“© Admin Message</h3>
  <p id="adminMessage">Waiting...</p>
</div>

<div class="section">
  <h2>ðŸŽ¯ LIVE SIGNAL</h2>
  <h1 id="signalText">WAITING...</h1>
  <p id="signalTime"></p>
</div>

<audio id="bigSound" src="big.mp3"></audio>
<audio id="smallSound" src="small.mp3"></audio>

<script>
// LIVE SIGNAL
firebase.database().ref("signal").on("value", snap=>{
  let d = snap.val();
  if(!d){
    signalText.innerText = "WAITING...";
    return;
  }

  signalText.innerText = d.current;
  signalTime.innerText = d.time;

  if(d.current === "BIG"){
    bigSound.play();
  }
  if(d.current === "SMALL"){
    smallSound.play();
  }
});

// ADMIN MESSAGE
firebase.database().ref("message").on("value", snap=>{
  let d = snap.val();
  if(d){
    adminMessage.innerText = d.text;
  }
});
</script>

</body>
</html>
