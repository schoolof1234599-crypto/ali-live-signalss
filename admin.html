<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Admin Panel</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
let pin = prompt("Enter Admin PIN");
if(pin !== "1234"){
  alert("Wrong PIN");
  document.body.innerHTML = "";
}
</script>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
firebase.initializeApp({
  databaseURL: "https://alisignal-default-rtdb.firebaseio.com/"
});
</script>

<style>
body{background:#000;color:white;text-align:center;font-family:sans-serif}
button{padding:15px;margin:10px;font-size:18px;border-radius:10px}
input{padding:10px;margin:5px;border-radius:8px}
</style>
</head>

<body>

<h1>ğŸ” ADMIN PANEL</h1>

<!-- ADMIN MESSAGE -->
<input id="adminMsg" placeholder="Message to users">
<br>
<button onclick="sendMessage()">ğŸ“© Send Message</button>

<hr>

<input id="time" placeholder="Time (e.g 2 min)">

<br><br>

<button onclick="sendSignal('BIG')" style="background:green;color:white">BIG</button>
<button onclick="sendSignal('SMALL')" style="background:red;color:white">SMALL</button>

<br>

<button onclick="pauseSignal()" style="background:#facc15;color:black">â¸ï¸ PAUSE</button>
<button onclick="clearSignal()" style="background:#94a3b8;color:black">ğŸ§¹ CLEAR</button>

<h3>ğŸ“Š STATS</h3>
<p id="profit">Profit: 0</p>
<p id="loss">Loss: 0</p>

<script>
// SEND MESSAGE
function sendMessage(){
  firebase.database().ref("message").set({
    text: document.getElementById("adminMsg").value,
    time: Date.now()
  });
  document.getElementById("adminMsg").value="";
}

// SEND SIGNAL
function sendSignal(val){
  firebase.database().ref("signal").set({
    current: val,
    time: document.getElementById("time").value,
    at: Date.now()
  });

  firebase.database().ref("history").push({
    current: val,
    time: document.getElementById("time").value,
    at: Date.now()
  });

  alert("Signal Sent: " + val);
}

// PAUSE
function pauseSignal(){
  firebase.database().ref("signal").set({
    current:"PAUSED",
    time:"---",
    at:Date.now()
  });
}

// CLEAR
function clearSignal(){
  firebase.database().ref("signal").remove();
}

// STATS
firebase.database().ref("votes").on("value", s=>{
  let v=s.val()||{};
  document.getElementById("profit").innerText="Profit: "+(v.profit||0);
  document.getElementById("loss").innerText="Loss: "+(v.loss||0);
});
</script>

</body>
</html>
